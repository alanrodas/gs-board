<link rel="import" href="gs-bolita.html">
<dom-module id="gs-celda">
  <template>
    <style>
      table.gbs_board {
        border-style: none;
        border: solid black 0px;
        border-spacing: 0;
        border-collapse: collapse;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 9pt;
        display: inline-block;
        vertical-align: top;
      }

      .gbs_board td {
        margin: 0;
        padding: 2px;
        border: solid #888 1px;
        width: 30px;
        height: 30px;
      }

      .gbs_board td.gh {
        /* position of the header in the board */
        margin: 0;
        padding: 2px;
        border: dotted #440 3px;
        background: #dd8;
        width: 30px;
        height: 30px;
      }

      .gbs_board td.lv {
        /* labels at the side */
        text-align: center;
        vertical-align: middle;
        border-style: none;
        border: solid black 0px;
        background: #ddd;
        width: 15px;
      }

      .gbs_board td.lh {
        /* labels at the top / bottom */
        text-align: center;
        vertical-align: middle;
        border-style: none;
        border: solid black 0px;
        background: #ddd;
        height: 15px;
      }

      .gbs_board td.lx {
        /* corner */
        border-style: none;
        border: solid black 0px;
        background: #ddd;
        width: 15px;
        height: 15px;
      }

      .gbs_board td.top_left {
        -webkit-border-top-left-radius: 10px;
        -moz-border-top-left-radius: 10px;
        border-top-left-radius: 10px;
      }

      .gbs_board td.top_right {
        -webkit-border-top-right-radius: 10px;
        -moz-border-top-right-radius: 10px;
        border-top-right-radius: 10px;
      }

      .gbs_board td.bottom_left {
        -webkit-border-bottom-left-radius: 10px;
        -moz-border-bottom-left-radius: 10px;
        border-bottom-left-radius: 10px;
      }

      .gbs_board td.bottom_right {
        -webkit-border-bottom-right-radius: 10px;
        -moz-border-bottom-right-radius: 10px;
        border-bottom-right-radius: 10px;
      }

      .gbs_board table.gc {
        /* cell table */
        border-style: none;
        border: solid black 0px;
      }

      .gbs_board .gc tr {
        border-style: none;
        border: 0px;
      }

      .gbs_board .gc td {
        border-style: none;
        border: solid black 0px;
        width: 15px;
        height: 15px;
        text-align: center;
        color: black;
      }

      .gbs_board .gc td div {
        line-height: 2;
      }

      .gbs_board div.A {
        background: #88f;
        border: solid 1px #008;
      }

      .gbs_board div.N {
        background: #aaa;
        border: solid 1px #222;
      }

      .gbs_board div.R {
        background: #f88;
        border: solid 1px #800;
      }

      .gbs_board div.V {
        background: #8f8;
        border: solid 1px #080;
      }

      .gbs_board div.O {
        width: 20px;
        height: 20px;
        background: none;
      }

      /* empty */
      .gbs_stone {
        font-weight: bold;
        font-size: 8pt;
        width: 20px;
        height: 20px;
        -webkit-border-radius: 10px;
        -moz-border-radius: 10px;
        border-radius: 10px;
      }

      .gbs_board div.blue {
        background: #88f;
        border: solid 1px #008;
      }

      .gbs_board div.black {
        background: #aaa;
        border: solid 1px #222;
      }

      .gbs_board div.red {
        background: #f88;
        border: solid 1px #800;
      }

      .gbs_board div.green {
        background: #8f8;
        border: solid 1px #080;
      }

      .gbs_board div.unknow {
        width: 20px;
        height: 20px;
        background: none;
      }

      /* empty */
      :host {
        float: left;
      }
      :host .gs-cel {
        float: left;
        margin-left: 4px;
        width: 40px;
        height: 40px;
        background-color: #BDB76B;
      }
      :host .gs-cel.first-row.first-column {
        border-top-left-radius: 10px;
      }
      :host .gs-cel.first-row.last-column {
        border-top-right-radius: 10px;
      }
      :host .gs-cel.last-row.first-column {
        border-bottom-left-radius: 10px;
      }
      :host .gs-cel.last-row.last-column {
        border-bottom-right-radius: 10px;
      }
      :host * {
        box-sizing: content-box;
      }

      /*# sourceMappingURL=style.css.map */

    </style>

    <div class$="gs-cel {{customClass}}" title="{{computedTitle}}">
      <gs-bolita color="black" amount="{{cell.negro}}"></gs-bolita>
      <gs-bolita color="blue"  amount="{{cell.azul}}" ></gs-bolita>
      <gs-bolita color="green" amount="{{cell.verde}}"></gs-bolita>
      <gs-bolita color="red"   amount="{{cell.rojo}}" ></gs-bolita>
    </div>
  </template>
  <script>
    Polymer({
      is: 'gs-celda',
      properties: {
        cell: {
          type: Object
        },
        rowIndex: {
          type: Number,
          value: 0
        },
        rowsAmount: {
          type: Number,
          value: 0
        },
        columnIndex: {
          type: Number,
          value: 0
        },
        columnsAmount: {
          type: Number,
          value: 0
        },
        customClass: {
          type: String,
          value: ''
        },
        computedTitle: {
          type: String,
          value: 'NaN:NaN'
        }
      },
      observers: ['_update(rowIndex, rowsAmount, columnIndex, columnAmount)'],
      created: function() {
        return this._custom_classes = [];
      },
      ready: function() {
        return this._update();
      },
      _update: function() {
        this.computedTitle = this.rowIndex + ':' + this.columnIndex;
        this._custom_classes.length = 0;
        if (this.rowIndex === 0) {
          this._custom_classes.push('first-row');
        } else if (this.rowIndex === (this.rowsAmount - 1)) {
          this._custom_classes.push('last-row');
        }
        if (this.columnIndex === 0) {
          this._custom_classes.push('first-column');
        } else if (this.columnIndex === (this.columnsAmount - 1)) {
          this._custom_classes.push('last-column');
        }
        return this.customClass = this._custom_classes.join(' ');
      }
    });

  </script>
</dom-module>