<link rel="import" href="gs-bolita.html">
<dom-module id="gs-celda">
  <template>
    <style>
      :host {
        float: left;
      }
      :host .gs-cel {
        float: left;
        margin-left: 4px;
        width: 40px;
        height: 40px;
        background-color: #BDB76B;
      }
      :host .gs-cel.first-row.first-column {
        border-bottom-left-radius: 10px;
      }
      :host .gs-cel.first-row.last-column {
        border-bottom-right-radius: 10px;
      }
      :host .gs-cel.last-row.first-column {
        border-top-left-radius: 10px;
      }
      :host .gs-cel.last-row.last-column {
        border-top-right-radius: 10px;
      }
      :host * {
        box-sizing: content-box;
      }
    </style>
    <div class$="gs-cel {{customClass}}" title="{{cellTitle}}">
      <template is="dom-repeat" items="{{colors}}" as="color">
        <gs-bolita 
          color="{{color}}" 
          row-index="{{rowIndex}}"
          column-index="{{columnIndex}}"
          editable="{{editable}}" 
          cell="{{cell}}"
          ></gs-bolita>
      </template>
    </div>
  </template>
  <script>
    Polymer({
      is: 'gs-celda',
      properties: {
        cell: {
          type: Object
        },
        colors: {
          type: Array,
          value: ['azul', 'negro', 'rojo', 'verde']
        },
        rowIndex: {
          type: Number
        },
        rowsAmount: {
          type: Number
        },
        columnIndex: {
          type: Number
        },
        columnAmount: {
          type: Number
        },
        customClass: {
          type: String,
          value: ''
        },
        cellTitle: {
          type: String,
          value: 'NaN:NaN'
        }
      },
      observers: ['_update(rowIndex,rowsAmount,columnIndex,columnAmount)'],
      created: function() {
        return this._custom_classes = [];
      },
      ready: function() {
        return this._update();
      },
      _update: function() {
        this.cellTitle = this.rowIndex + ':' + this.columnIndex;
        this._custom_classes.length = 0;
        if (this.rowIndex === 0) {
          this._custom_classes.push('first-row');
        } else if (this.rowIndex === (this.rowsAmount - 1)) {
          this._custom_classes.push('last-row');
        }
        if (this.columnIndex === 0) {
          this._custom_classes.push('first-column');
        } else if (this.columnIndex === (this.columnAmount - 1)) {
          this._custom_classes.push('last-column');
        }
        return this.customClass = this._custom_classes.join(' ');
      }
    });
  </script>
</dom-module>