<link rel="import" href="gs-fila.html">
<dom-module id="gs-tablero">
  <template>
    <style>
      :host {
        background-color: white;
        display: block;
      }

      .compass-top-right,
      .empty-top-left,
      .empty-bottom-left,
      .column-index-bottom,
      .column-index-top {
        float: left;
        width: 40px;
        height: 40px;
        background-color: #BBB;
      }

      .compass-top-right,
      .column-index-bottom,
      .column-index-top {
        margin-left: 4px;
      }

      .column-index-bottom,
      .empty-bottom-left {
        margin-top: 4px;
      }

      .empty-bottom-left {
        clear: left;
      }

      .column-index-bottom {
        height: 30px;
        padding-top: 10px;
      }

      .column-index-top .index {
        display: block;
        vertical-align: bottom;
      }

      .column-index-bottom,
      .column-index-top {
        text-align: center;
      }

    </style>

    <div class="empty-top-left"></div>
    <template is="dom-iterate" from="0" to="{{columnsMaxLength}}" include-last="{{hardcode_false}}" index-as="columnIndex">
      <div class="column-index-top"><span class="index">{{columnIndex}}</span></div>
    </template>
    <div class="compass-top-right"></div>
    <template is="dom-repeat" items="{{rows}}" as="row" index-as="rowIndex">
      <gs-fila row="{{row}}" row-index="{{rowIndex}}"></gs-fila>
    </template>
    <div class="empty-bottom-left"></div>
    <template is="dom-iterate" from="0" to="{{columnsMaxLength}}" include-last="{{hardcode_false}}" index-as="columnIndex">
      <div class="column-index-bottom">{{columnIndex}}</div>
    </template>

  </template>
  <script>
    Polymer({
      is: 'gs-tablero',
      properties: {
        rows: {
          type: Array,
          notify: true,
          observer: '_rows_change'
        },
        columnsMaxLength: {
          type: String,
          value: 0
        },
        hardcode_false: {
          comment: 'polymer does not allow literal false in html',
          type: Boolean,
          value: false
        }
      },
      _generate_empty_row: function() {
        var _, _i, _results;
        _results = [];
        for (_ = _i = 0; _i < 8; _ = ++_i) {
          _results.push({});
        }
        return _results;
      },
      _generate_empty_rows: function() {
        var _, _i, _results;
        _results = [];
        for (_ = _i = 0; _i < 8; _ = ++_i) {
          _results.push(this._generate_empty_row());
        }
        return _results;
      },
      ready: function() {
        return this.rows = this._generate_empty_rows();
      },
      _rows_change: function() {
        var row, _i, _len, _ref, _results;
        this.columnsMaxLength = 0;
        _ref = this.rows;
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          row = _ref[_i];
          if (row.length > this.columnsMaxLength) {
            _results.push(this.columnsMaxLength = row.length);
          } else {
            _results.push(void 0);
          }
        }
        return _results;
      }
    });

  </script>
</dom-module>