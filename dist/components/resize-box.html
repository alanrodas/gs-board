<dom-module id="resize-box">
  <template>
    <style>
      .pointer {
        cursor: pointer;
      }

      .unselectable {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      .resize {
        cursor: nw-resize;
      }

      /*# sourceMappingURL=style.css.map */

    </style>

    <p class="unselectable resize">&#9632;</p>

  </template>
  <script>
    Polymer({
      is: 'resize-box',
      listeners: {
        mousedown: "_mouseDown"
      },
      ready: function() {
        this.state = {
          dragging: false
        };
        this.unitWidth = 50;
        this.unitHeight = 50;
        this._listenTo("mousemove", (function(_this) {
          return function(e) {
            return _this._mouseMove(e);
          };
        })(this));
        return this._listenTo("mouseup", (function(_this) {
          return function(e) {
            return _this._mouseUp(e);
          };
        })(this));
      },
      _listenTo: function(event, handler) {
        return window.addEventListener(event, (function(_this) {
          return function(e) {
            if (!_this.state.dragging) {
              return;
            }
            return handler(e);
          };
        })(this));
      },
      _mouseDown: function(e) {
        return this.state = {
          dragging: true,
          initialPosition: e
        };
      },
      _mouseUp: function(e) {
        return this.state.dragging = false;
      },
      _mouseMove: function(e) {
        var delta;
        delta = this._getDelta(e);
        if (delta.deltaX === 0 && delta.deltaY === 0) {
          return;
        }
        this.fire("resize", delta);
        console.log("RESIZEAR", delta);
        return this.state.initialPosition = e;
      },
      _getDelta: function(e) {
        return {
          deltaX: Math.ceil((e.x - this.state.initialPosition.x) / this.unitWidth),
          deltaY: Math.ceil((e.y - this.state.initialPosition.y) / this.unitHeight)
        };
      }
    });

  </script>
</dom-module>