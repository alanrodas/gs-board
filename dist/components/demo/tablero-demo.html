<link rel="import" href="../../../../gs-panels/dist/components/gs-panel-root.html">
<dom-module id="tablero-demo">
  <template>
    <style>
      .tablero-wrap-json,
      .tablero-panels {
        margin: 0px;
      }

      .tablero-panels {
        width: auto;
        margin-left: 310px;
        height: 300px;
      }

      .tablero-wrap-json {
        width: 300px;
        height: 300px;
        float: left;
      }

    </style>


        


    <!--
    <div class="buttons">
      <button id="clean" class="btn clean">Clean</button>
      <button id="load" class="btn load">Load</button>
    </div>
    <div class="tablero-wrap-before">
      <gs-tablero style="width: 400px; height: 300px;" board="{{model.tablero}}"></gs-tablero>
    </div>
    <div class="tablero-wrap-after">
      <gs-tablero style=" width: 350px; height: 400px;" board="{{model.tablero}}"></gs-tablero>
    </div>
    -->


    <div class="tablero-wrap-json">
      <juicy-jsoneditor id="jsoneditor" style="height: 300px;" json="{{jsonModel}}"></juicy-jsoneditor>
    </div>
    <div class="tablero-panels">
      <gs-panel-root id="gsPanels" root-height="400"></gs-panel-root>
    </div>
  </template>
  <script>
    var model, negro4, rojo_3, tablero_inicial, vacio0, varias, verde2;

    vacio0 = function() {
      return {};
    };

    verde2 = function() {
      return {
        verde: 2
      };
    };

    rojo_3 = function() {
      return {
        rojo: 3
      };
    };

    negro4 = function() {
      return {
        negro: 4
      };
    };

    varias = function() {
      return {
        negro: 4,
        rojo: 4
      };
    };

    tablero_inicial = [[verde2(), vacio0(), vacio0(), vacio0(), vacio0(), vacio0(), vacio0(), vacio0()], [verde2(), vacio0(), vacio0(), vacio0(), rojo_3(), vacio0(), vacio0(), vacio0()], [vacio0(), vacio0(), rojo_3(), vacio0(), vacio0(), vacio0(), vacio0(), vacio0()], [rojo_3(), rojo_3(), vacio0(), vacio0(), vacio0(), vacio0(), rojo_3(), vacio0()], [vacio0(), vacio0(), vacio0(), vacio0(), rojo_3(), vacio0(), vacio0(), vacio0()], [vacio0(), vacio0(), vacio0(), vacio0(), vacio0(), vacio0(), vacio0(), vacio0()], [vacio0(), vacio0(), rojo_3(), vacio0(), rojo_3(), vacio0(), vacio0(), vacio0()], [vacio0(), vacio0(), vacio0(), vacio0(), vacio0(), vacio0(), vacio0(), vacio0()]];

    model = {
      tablero: tablero_inicial
    };

    Polymer({
      is: 'tablero-demo',
      properties: {
        model: {
          type: Object,
          value: model
        },
        jsonModel: {
          type: Object,
          value: model
        }
      },
      listeners: {
        'jsoneditor.change': '_json_change'
      },
      AFTER: 'AFTER',
      BEFORE: 'BEFORE',
      IDE: 'IDE',
      ready: function() {
        this.panels = this.$.gsPanels;
        this.after = this.create_board(true);
        return this.before = this.create_board(false);
      },
      attached: function() {
        this.panels.add_horizontal(this.IDE);
        this.panels.add(this.after, {
          id: this.AFTER,
          into: this.IDE
        });
        return this.panels.add(this.before, {
          id: this.BEFORE,
          into: this.IDE
        });
      },
      create_board: function(editable) {
        var element;
        element = document.createElement('gs-tablero');
        element.board = this.model.tablero;
        element.editable = editable;
        return element;
      },
      _json_change: function() {
        return this.async(this._force_render, 0);
      },
      _force_render: function() {
        this.model = {};
        return this.async(this._set_model, 0);
      },
      _set_model: function() {
        return this.model = model;
      }
    });

  </script>
</dom-module>